<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio - Assia Hamouni</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/dashboard.css">
    <link rel="stylesheet" href="styles/portfolio.css">
    <link rel="stylesheet" href="styles/universities.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <img src="zhacademie-logo.png" alt="ZHAcademie" style="width: 180px; height: 180px; object-fit: contain;">
            </div>
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="nav-menu" id="navMenu">
                <a href="dashboard.html" class="nav-link">
                    <i class="fas fa-home"></i>
                    Dashboard
                </a>
                <a href="universities.html" class="nav-link">
                    <i class="fas fa-university"></i>
                    Universities
                </a>
                <a href="canvas.html" class="nav-link">
                    <i class="fas fa-paint-brush"></i>
                    Canvas
                </a>
                <a href="portfolio.html" class="nav-link active">
                    <i class="fas fa-folder"></i>
                    Portfolio
                </a>
                <a href="scores.html" class="nav-link">
                    <i class="fas fa-chart-line"></i>
                    Scores
                </a>
                <a href="tasks.html" class="nav-link">
                    <i class="fas fa-tasks"></i>
                    Tasks
                </a>
                <a href="sat-practice.html" class="nav-link">
                    <i class="fas fa-pencil-alt"></i>
                    SAT Practice
                </a>
            </div>
            <div class="nav-actions">
                <button id="themeToggle" class="theme-toggle">
                    <i class="fas fa-moon"></i>
                </button>
                <div class="user-menu">
                    <button id="userMenuBtn" class="user-btn">
                        <img id="userAvatar" src="" alt="User" class="user-avatar">
                        <span id="userName">Loading...</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div id="userDropdown" class="user-dropdown">
                        <a href="profile.html" id="profileLink">
                            <i class="fas fa-user"></i>
                            Profile
                        </a>
                        <a href="#" class="theme-toggle-link" onclick="toggleTheme()">
                            <i class="fas fa-moon"></i>
                            Theme
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="#" id="logoutBtn">
                            <i class="fas fa-sign-out-alt"></i>
                            Logout
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <main class="main-content">
        <div class="container">
            <div class="page-header">
                <div class="header-content">
                    <h1 class="page-title">Portfolio</h1>
                    <p class="page-description">Manage your documents, essays, and application materials with professional organization</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-secondary" id="createFolderBtn">
                        <i class="fas fa-folder-plus"></i>
                        New Folder
                    </button>
                    <button class="btn btn-secondary" id="exportPortfolioBtn">
                        <i class="fas fa-file-archive"></i>
                        Export ZIP
                    </button>
                    <div class="btn-group">
                        <button class="btn btn-primary" id="addFileBtn">
                            <i class="fas fa-plus"></i>
                            Add Files
                        </button>
                        <button class="btn btn-primary dropdown-toggle" id="addOptionsBtn">
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="dropdown-menu" id="addOptionsMenu">
                            <button class="dropdown-item" id="uploadFilesOption">
                                <i class="fas fa-upload"></i>
                                Upload Files
                            </button>
                            <button class="dropdown-item" id="createDocumentOption">
                                <i class="fas fa-file-alt"></i>
                                Create Document
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="portfolio-toolbar">
                <div class="toolbar-left">
                    <div class="breadcrumb-container">
                        <nav class="breadcrumb" id="breadcrumb">
                            <span class="breadcrumb-item active" data-folder="">
                                <i class="fas fa-home"></i>
                                Portfolio
                            </span>
                        </nav>
                    </div>
                    <div class="search-container">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" id="searchInput" class="search-input" placeholder="Search files, descriptions, or tags...">
                    </div>
                    <div class="filter-container">
                        <select id="categoryFilter" class="filter-select">
                            <option value="">All Categories</option>
                            <option value="academic">Academic Documents</option>
                            <option value="personal">Personal Essays</option>
                            <option value="transcripts">Transcripts</option>
                            <option value="recommendations">Recommendations</option>
                            <option value="certificates">Certificates</option>
                            <option value="projects">Projects</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                </div>
                <div class="toolbar-right">
                    <div class="view-controls">
                        <button class="view-btn active" id="gridView" title="Grid View">
                            <i class="fas fa-th"></i>
                        </button>
                        <button class="view-btn" id="listView" title="List View">
                            <i class="fas fa-list"></i>
                        </button>
                    </div>
                    <div class="sort-controls">
                        <select id="sortSelect" class="sort-select">
                            <option value="date-desc">Newest First</option>
                            <option value="date-asc">Oldest First</option>
                            <option value="name-asc">Name A-Z</option>
                            <option value="name-desc">Name Z-A</option>
                            <option value="category">Category</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="portfolio-stats">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-folder"></i>
                    </div>
                    <div class="stat-content">
                        <span class="stat-number" id="totalFolders">0</span>
                        <span class="stat-label">Folders</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-file-alt"></i>
                    </div>
                    <div class="stat-content">
                        <span class="stat-number" id="totalFiles">0</span>
                        <span class="stat-label">Total Files</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-hdd"></i>
                    </div>
                    <div class="stat-content">
                        <span class="stat-number" id="totalSize">0 MB</span>
                        <span class="stat-label">Total Size</span>
                    </div>
                </div>
            </div>

            <div class="portfolio-grid" id="portfolioGrid">
                <div class="loading-state">
                    <div class="loading-spinner-large"></div>
                    <h3 class="loading-title">Loading your portfolio...</h3>
                    <p class="loading-description">Please wait while we fetch your files and folders</p>
                </div>
            </div>
        </div>
    </main>

    <div id="addFileModal" class="modal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h2 class="modal-title">Add New File</h2>
                <button class="close-btn" id="closeAddFileModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="upload-section">
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-content">
                            <i class="fas fa-cloud-upload-alt upload-icon"></i>
                            <h3 class="upload-title">Drop files here or click to browse</h3>
                            <p class="upload-description">Supports PDF, JPG, PNG files</p>
                            <button type="button" class="btn btn-outline" id="browseFilesBtn">
                                <i class="fas fa-folder-open"></i>
                                Browse Files
                            </button>
                        </div>
                        <input type="file" id="fileInput" multiple accept=".pdf,.jpg,.jpeg,.png">
                    </div>
                </div>
                <div class="files-to-upload" id="filesToUpload" style="display: none;">
                    <h3>Files to Upload</h3>
                    <div class="upload-files-list" id="uploadFilesList"></div>
                    <div class="upload-actions">
                        <button type="button" class="btn btn-secondary" id="clearFilesBtn">Clear All</button>
                        <button type="button" class="btn btn-primary" id="uploadFilesBtn">
                            <i class="fas fa-upload"></i>
                            Upload Files
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="fileDetailsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="fileDetailsTitle">File Details</h2>
                <button class="close-btn" id="closeFileDetailsModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="fileDetailsForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="fileName" class="form-label">File Name</label>
                            <input type="text" id="fileName" class="form-input" required placeholder="Enter a descriptive name">
                        </div>
                        <div class="form-group">
                            <label for="fileCategory" class="form-label">Category</label>
                            <select id="fileCategory" class="form-select" required>
                                <option value="">Select Category</option>
                                <option value="academic">Academic Documents</option>
                                <option value="personal">Personal Essays</option>
                                <option value="transcripts">Transcripts</option>
                                <option value="recommendations">Recommendations</option>
                                <option value="certificates">Certificates</option>
                                <option value="projects">Projects</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="fileNotes" class="form-label">Notes</label>
                        <textarea id="fileNotes" class="form-textarea" rows="4" placeholder="Add notes, description, or any relevant information about this file..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="fileTags" class="form-label">Tags</label>
                        <input type="text" id="fileTags" class="form-input" placeholder="e.g., harvard, draft, important (comma-separated)">
                        <small class="form-help">Use tags to organize and quickly find your files</small>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="cancelFileDetails">Cancel</button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i>
                            Save File
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="previewModal" class="modal">
        <div class="modal-content preview-modal resizable">
            <div class="resize-handle resize-nw"></div>
            <div class="resize-handle resize-ne"></div>
            <div class="resize-handle resize-sw"></div>
            <div class="resize-handle resize-se"></div>
            <div class="resize-handle resize-n"></div>
            <div class="resize-handle resize-s"></div>
            <div class="resize-handle resize-w"></div>
            <div class="resize-handle resize-e"></div>
            <div class="modal-header">
                <button class="close-btn-fixed" id="closePreviewModal">&times;</button>
                <div class="modal-actions-top">
                    <button class="btn btn-outline btn-sm" id="fullscreenBtn">
                        <i class="fas fa-expand"></i>
                        Fullscreen
                    </button>
                    <button class="btn btn-outline btn-sm" id="downloadFromPreview">
                        <i class="fas fa-download"></i>
                        Download
                    </button>
                    <button class="btn btn-outline btn-sm" id="zoomOutBtn">
                        <i class="fas fa-search-minus"></i>
                    </button>
                    <span class="zoom-level" id="zoomLevel">100%</span>
                    <button class="btn btn-outline btn-sm" id="zoomInBtn">
                        <i class="fas fa-search-plus"></i>
                    </button>
                </div>
                <div class="preview-header-content">
                    <div class="preview-header-left">
                        <h2 class="modal-title" id="previewTitle">File Preview</h2>
                        <div class="preview-file-info">
                            <span class="preview-file-size" id="previewFileSize"></span>
                            <span class="preview-file-type" id="previewFileType"></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-body">
                <div class="preview-content" id="previewContent">
                    <div class="preview-loading">
                        <div class="loading-spinner"></div>
                        <p>Loading preview...</p>
                    </div>
                </div>
                <div class="preview-navigation">
                    <button class="nav-btn" id="prevFileBtn" disabled>
                        <i class="fas fa-chevron-left"></i>
                        Previous
                    </button>
                    <span class="file-counter" id="fileCounter">1 of 1</span>
                    <button class="nav-btn" id="nextFileBtn" disabled>
                        Next
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
            <div class="resize-indicator">
                <i class="fas fa-expand-arrows-alt"></i>
            </div>
        </div>
    </div>

    <div id="confirmModal" class="modal">
        <div class="modal-content confirmation-modal">
            <div class="modal-header">
                <h2 class="modal-title" id="confirmTitle">Confirm Action</h2>
                <button class="close-btn" id="closeConfirmModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="confirm-content">
                    <div class="confirm-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="confirm-text">
                        <p id="confirmMessage">Are you sure you want to proceed?</p>
                        <p class="confirm-warning">This action cannot be undone.</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelConfirm">Cancel</button>
                <button class="btn btn-danger" id="confirmAction">
                    <i class="fas fa-trash"></i>
                    Delete
                </button>
            </div>
        </div>
    </div>

    <div id="createFolderModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Create New Folder</h2>
                <button class="close-btn" id="closeCreateFolderModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="createFolderForm">
                    <div class="form-group">
                        <label for="folderName" class="form-label">Folder Name</label>
                        <input type="text" id="folderName" class="form-input" required placeholder="Enter folder name..." maxlength="50">
                    </div>
                    <div class="form-group">
                        <label for="folderDescription" class="form-label">Description (Optional)</label>
                        <textarea id="folderDescription" class="form-textarea" rows="3" placeholder="Add a description for this folder..."></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="cancelCreateFolder">Cancel</button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-folder-plus"></i>
                            Create Folder
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="documentEditorModal" class="modal">
        <div class="modal-content document-editor-modal">
            <div class="modal-header">
                <h2 class="modal-title">Document Editor</h2>
                <div class="editor-actions">
                    <button class="btn btn-secondary btn-sm" id="saveDocumentBtn">
                        <i class="fas fa-save"></i>
                        Save
                    </button>
                    <button class="close-btn" id="closeDocumentEditorModal">&times;</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="document-settings">
                    <div class="setting-group">
                        <input type="text" id="documentTitle" class="document-title-input" placeholder="Document Title" required>
                    </div>
                    <div class="setting-group">
                        <select id="documentCategory" class="document-category-select">
                            <option value="">No Category</option>
                            <option value="academic">Academic Documents</option>
                            <option value="personal">Personal Essays</option>
                            <option value="transcripts">Transcripts</option>
                            <option value="recommendations">Recommendations</option>
                            <option value="certificates">Certificates</option>
                            <option value="projects">Projects</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                </div>
                <div class="editor-toolbar">
                    <div class="toolbar-group">
                        <button class="toolbar-btn" data-action="bold" title="Bold"><i class="fas fa-bold"></i></button>
                        <button class="toolbar-btn" data-action="italic" title="Italic"><i class="fas fa-italic"></i></button>
                        <button class="toolbar-btn" data-action="underline" title="Underline"><i class="fas fa-underline"></i></button>
                        <button class="toolbar-btn" data-action="strikeThrough" title="Strikethrough"><i class="fas fa-strikethrough"></i></button>
                        <button class="toolbar-btn" data-action="superscript" title="Superscript"><i class="fas fa-superscript"></i></button>
                        <button class="toolbar-btn" data-action="subscript" title="Subscript"><i class="fas fa-subscript"></i></button>
                    </div>
                    <div class="toolbar-separator"></div>
                    <div class="toolbar-group">
                        <select class="toolbar-select" id="fontFamily">
                            <option value="Arial">Arial</option>
                            <option value="Georgia">Georgia</option>
                            <option value="Times New Roman">Times New Roman</option>
                            <option value="Verdana">Verdana</option>
                            <option value="Helvetica">Helvetica</option>
                            <option value="Courier New">Courier New</option>
                        </select>
                        <select class="toolbar-select" id="fontSize">
                            <option value="10px">10px</option>
                            <option value="12px">12px</option>
                            <option value="14px" selected>14px</option>
                            <option value="16px">16px</option>
                            <option value="18px">18px</option>
                            <option value="20px">20px</option>
                            <option value="24px">24px</option>
                            <option value="28px">28px</option>
                            <option value="32px">32px</option>
                            <option value="36px">36px</option>
                        </select>
                    </div>
                    <div class="toolbar-separator"></div>
                    <div class="toolbar-group">
                        <input type="color" class="color-picker" id="textColor" value="#000000" title="Text Color">
                        <input type="color" class="color-picker" id="backgroundColor" value="#ffffff" title="Background Color">
                    </div>
                    <div class="toolbar-separator"></div>
                    <div class="toolbar-group">
                        <button class="toolbar-btn" data-action="justifyLeft" title="Align Left"><i class="fas fa-align-left"></i></button>
                        <button class="toolbar-btn" data-action="justifyCenter" title="Align Center"><i class="fas fa-align-center"></i></button>
                        <button class="toolbar-btn" data-action="justifyRight" title="Align Right"><i class="fas fa-align-right"></i></button>
                        <button class="toolbar-btn" data-action="justifyFull" title="Justify"><i class="fas fa-align-justify"></i></button>
                    </div>
                    <div class="toolbar-separator"></div>
                    <div class="toolbar-group">
                        <button class="toolbar-btn" data-action="insertOrderedList" title="Numbered List"><i class="fas fa-list-ol"></i></button>
                        <button class="toolbar-btn" data-action="insertUnorderedList" title="Bullet List"><i class="fas fa-list-ul"></i></button>
                        <button class="toolbar-btn" data-action="outdent" title="Outdent"><i class="fas fa-outdent"></i></button>
                        <button class="toolbar-btn" data-action="indent" title="Indent"><i class="fas fa-indent"></i></button>
                    </div>
                    <div class="toolbar-separator"></div>
                    <div class="toolbar-group">
                        <button class="toolbar-btn" data-action="undo" title="Undo"><i class="fas fa-undo"></i></button>
                        <button class="toolbar-btn" data-action="redo" title="Redo"><i class="fas fa-redo"></i></button>
                        <button class="toolbar-btn" data-action="removeFormat" title="Clear Formatting"><i class="fas fa-eraser"></i></button>
                        <button class="toolbar-btn" data-action="insertHorizontalRule" title="Insert Line"><i class="fas fa-minus"></i></button>
                    </div>
                </div>
                <div class="editor-container">
                    <div id="documentEditor" class="document-editor" contenteditable="true" style="height: 70vh; min-height: 400px; overflow-y: auto;">
                        <p>Start writing your document here...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="ai-chat-fab" id="aiChatFab">
        <i class="fas fa-robot"></i>
    </div>

    <div class="ai-chat-modal" id="aiChatModal">
        <div class="ai-chat-header">
            <div class="chat-header-info">
                <div class="chat-avatar">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <div class="chat-title">
                    <h3>University Assistant</h3>
                    <span class="chat-status">Ask me anything about universities</span>
                </div>
            </div>
            <div class="chat-header-actions">
                <button class="chat-resize-btn" id="chatResizeBtn">
                    <i class="fas fa-expand"></i>
                </button>
                <button class="chat-close-btn" id="chatCloseBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        
        <div class="ai-chat-messages" id="chatMessages">
        </div>
        
        <div class="ai-chat-input">
            <div class="quick-questions" id="quickQuestions">
                <button class="quick-btn" data-question="How many colleges are in Orlando?">
                    Colleges in Orlando
                </button>
                <button class="quick-btn" data-question="What are the best universities in Florida?">
                    Florida Universities
                </button>
                <button class="quick-btn" data-question="Tell me about scholarship opportunities">
                    Scholarships
                </button>
                <button class="quick-btn" data-question="What's the difference between public and private universities?">
                    Public vs Private
                </button>
            </div>
            <div class="input-container">
                <input type="text" id="chatInput" placeholder="Ask about universities, admissions, scholarships..." />
                <button id="sendBtn" class="send-btn">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-storage-compat.js"></script>
    <script src="js/config.js"></script>
    <script src="js/common.js"></script>
    <script src="js/portfolio.js"></script>
</body>
</html>
